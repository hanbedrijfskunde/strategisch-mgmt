<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Klantservice Kennisdomein</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: transparent;
      overflow: hidden;
    }
    #p5-container {
      width: 100%;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body>
  <div id="p5-container"></div>

  <script>
    let animationProgress = 0;
    const LAYOUT = {
      width: 0,
      height: 0,
      timelineY: 0.25,
      marginX: 0.1,
      titleY: 0.08,
      x0BoxTop: 0.12,
      x0BoxHeight: 0.10,
      timelineLabelY: 0.28,
      pointLabelTopY: 0.33,
      region2BracketY: 0.48,
      region2LabelY: 0.51,
      region13BoxesY: 0.62,
      region13BoxHeight: 0.18,
      bottomBoxY: 0.88,
      bottomBoxHeight: 0.12,
      x0: 0.5,
      x20: 0.2,
      x35: 0.35,
      x65: 0.65,
      x80: 0.8,
      q: 0.15,
    };

    function setup() {
      let cnv = createCanvas(windowWidth, windowHeight);
      cnv.parent('p5-container');
      textFont('Inter');
      frameRate(60);
      LAYOUT.width = width;
      LAYOUT.height = height;
    }

    // Helper function to draw text with white background
    function textWithBackground(txt, x, y, textColor, bgPadding = 8) {
      push();
      const txtWidth = textWidth(txt);
      const txtSize = textSize();

      // Draw white background
      fill(255, 255, 255, 245);
      noStroke();
      rectMode(CENTER);
      rect(x, y - txtSize * 0.12, txtWidth + bgPadding * 2, txtSize + bgPadding, 5);

      // Draw text
      fill(textColor);
      textAlign(CENTER, CENTER);
      text(txt, x, y);
      pop();
    }

    function draw() {
      clear();

      if (animationProgress < 1) {
        animationProgress += 0.015;
      }

      const w = width;
      const h = height;
      const margin = w * LAYOUT.marginX;
      const lineStartX = margin;
      const lineEndX = w - margin;
      const lineLength = lineEndX - lineStartX;
      const lineY = h * LAYOUT.timelineY;

      function fracToX(frac) {
        return lineStartX + lineLength * frac;
      }

      // Title removed per user request

      // === MAIN HORIZONTAL LINE ===
      if (animationProgress > 0.1) {
        push();
        stroke(8, 61, 119);
        strokeWeight(3);
        const currentLineEnd = lerp(lineStartX, lineEndX, Math.min((animationProgress - 0.1) / 0.2, 1));
        line(lineStartX, lineY, currentLineEnd, lineY);

        const arrowSize = 12;
        if (animationProgress > 0.3) {
          fill(8, 61, 119);
          triangle(lineStartX, lineY, lineStartX + arrowSize, lineY - arrowSize/2, lineStartX + arrowSize, lineY + arrowSize/2);
          triangle(lineEndX, lineY, lineEndX - arrowSize, lineY - arrowSize/2, lineEndX - arrowSize, lineY + arrowSize/2);
        }
        pop();
      }

      // === AXIS LABELS (0, 0.5, 1) ===
      if (animationProgress > 0.3) {
        const x0Pos = fracToX(LAYOUT.x0);

        push();
        textAlign(CENTER, TOP);
        textSize(w * 0.020);
        fill(8, 61, 119);
        textStyle(BOLD);
        text("0", lineStartX, h * LAYOUT.timelineLabelY);
        text("0.5 (xâ‚€)", x0Pos, h * LAYOUT.timelineLabelY);
        text("1", lineEndX, h * LAYOUT.timelineLabelY);
        pop();
      }

      // === X0 BOX (STANDAARD VRAAG MET SCRIPT) ===
      if (animationProgress > 0.4) {
        const x0Pos = fracToX(LAYOUT.x0);
        const boxW = Math.min(w * 0.24, 280);
        const boxH = h * LAYOUT.x0BoxHeight;
        const boxY = h * LAYOUT.x0BoxTop;

        push();
        fill(76, 175, 80, 40);
        stroke(76, 175, 80);
        strokeWeight(2.5);
        rectMode(CENTER);
        rect(x0Pos, boxY + boxH/2, boxW, boxH, 6);

        fill(76, 175, 80);
        noStroke();
        textAlign(CENTER, CENTER);
        textSize(w * 0.018);
        textStyle(BOLD);
        // Better line spacing - using Y positions instead of fractions
        const lineSpacing = w * 0.015; // ~21px spacing
        let yPos = boxY + boxH * 0.25;
        text('"STANDAARD VRAAG', x0Pos, yPos);
        yPos += lineSpacing;
        text('MET SCRIPT"', x0Pos, yPos);
        yPos += lineSpacing;
        textSize(w * 0.016);
        textStyle(NORMAL);
        text('(JE KENT DIT!)', x0Pos, yPos);
        pop();

        // Vertical line at xâ‚€
        push();
        stroke(76, 175, 80);
        strokeWeight(3);
        line(x0Pos, boxY + boxH, x0Pos, h * LAYOUT.region2BracketY);
        pop();
      }

      // === REGION 2 POINTS (0.35, 0.5, 0.65) ===
      if (animationProgress > 0.5) {
        const pos35 = fracToX(LAYOUT.x35);
        const pos50 = fracToX(LAYOUT.x0);
        const pos65 = fracToX(LAYOUT.x65);

        // Draw circles on timeline
        push();
        fill(100, 149, 237);
        noStroke();
        const dotSize = 10;
        circle(pos35, lineY, dotSize);
        circle(pos50, lineY, dotSize);
        circle(pos65, lineY, dotSize);
        pop();

        // Labels above points (white background)
        push();
        textSize(w * 0.013);
        textStyle(BOLD);
        const labelAboveY = lineY - 8;
        textAlign(CENTER, BOTTOM);

        const txtColor = color(100, 149, 237);
        textWithBackground("0.35", pos35, labelAboveY - 10, txtColor, 6);
        textWithBackground("0.5", pos50, labelAboveY - 10, txtColor, 6);
        textWithBackground("0.65", pos65, labelAboveY - 10, txtColor, 6);
        pop();

        // Labels below points with white backgrounds
        push();
        textSize(w * 0.015);
        const labelBelowY = h * LAYOUT.pointLabelTopY;
        const lineSpacing = w * 0.018; // ~25px spacing to prevent overlap
        const labelColor = color(100, 149, 237);

        textStyle(NORMAL);
        // Position 0.35
        textWithBackground('"Boze klant', pos35, labelBelowY, labelColor, 8);
        textWithBackground('buiten script"', pos35, labelBelowY + lineSpacing, labelColor, 8);
        textWithBackground('ðŸ“™ (Moet nadenken)', pos35, labelBelowY + lineSpacing * 2, labelColor, 8);

        // Position 0.5
        textWithBackground('"Retour', pos50, labelBelowY, labelColor, 8);
        textWithBackground('afhandelen"', pos50, labelBelowY + lineSpacing, labelColor, 8);
        textWithBackground('ðŸ“˜ (Ken je)', pos50, labelBelowY + lineSpacing * 2, labelColor, 8);

        // Position 0.65
        textWithBackground('"Chatbot voor', pos65, labelBelowY, labelColor, 8);
        textWithBackground('standaardvragen"', pos65, labelBelowY + lineSpacing, labelColor, 8);
        textWithBackground('ðŸ“™ (Aanpassing)', pos65, labelBelowY + lineSpacing * 2, labelColor, 8);
        pop();
      }

      // === REGION 2 BRACKET ===
      if (animationProgress > 0.6) {
        const region2Start = fracToX(LAYOUT.x0 - LAYOUT.q);
        const region2End = fracToX(LAYOUT.x0 + LAYOUT.q);
        const bracketY = h * LAYOUT.region2BracketY;
        const bracketH = 15;

        push();
        stroke(100, 149, 237);
        strokeWeight(2);
        noFill();
        line(region2Start, bracketY, region2Start, bracketY - bracketH);
        line(region2Start, bracketY, region2End, bracketY);
        line(region2End, bracketY, region2End, bracketY - bracketH);
        pop();

        // Region 2 label with white background
        push();
        textSize(w * 0.016);
        textStyle(BOLD);
        const labelY = h * LAYOUT.region2LabelY;
        textWithBackground("ðŸ“™ Region 2 (Comfort zone - bestaande kennis werkt)",
                          (region2Start + region2End)/2, labelY, color(100, 149, 237), 10);
        pop();
      }

      // === REGION 1 & 3 POINTS AND BOXES ===
      if (animationProgress > 0.7) {
        const pos20 = fracToX(LAYOUT.x20);
        const pos80 = fracToX(LAYOUT.x80);

        // Draw circles
        push();
        fill(244, 67, 54);
        noStroke();
        circle(pos20, lineY, 10);
        circle(pos80, lineY, 10);
        pop();

        // Labels above points with white background
        push();
        textSize(w * 0.013);
        textStyle(BOLD);
        const redColor = color(244, 67, 54);
        textWithBackground("0.2", pos20, lineY - 18, redColor, 6);
        textWithBackground("0.8", pos80, lineY - 18, redColor, 6);
        pop();

        // Region boxes
        const geniusBoxW = Math.min(w * 0.20, 240);
        const geniusBoxH = h * LAYOUT.region13BoxHeight;
        const geniusBoxY = h * LAYOUT.region13BoxesY;

        // Region 1 box (left)
        push();
        fill(244, 67, 54, 30);
        stroke(244, 67, 54);
        strokeWeight(2);
        rectMode(CENTER);
        rect(pos20, geniusBoxY, geniusBoxW, geniusBoxH, 6);

        fill(244, 67, 54);
        noStroke();
        textAlign(CENTER, CENTER);
        textSize(w * 0.018);
        textStyle(BOLD);
        text('ðŸ“• Region 1', pos20, geniusBoxY - geniusBoxH * 0.35);
        textStyle(NORMAL);
        textSize(w * 0.015);
        text('Genius nodig', pos20, geniusBoxY - geniusBoxH * 0.15);
        text('(Hoge onzekerheid)', pos20, geniusBoxY);
        textSize(w * 0.015);
        text('"Compleet nieuw', pos20, geniusBoxY + geniusBoxH * 0.18);
        text('klantsysteem ontwerpen"', pos20, geniusBoxY + geniusBoxH * 0.35);
        pop();

        // Region 3 box (right)
        push();
        fill(244, 67, 54, 30);
        stroke(244, 67, 54);
        strokeWeight(2);
        rectMode(CENTER);
        rect(pos80, geniusBoxY, geniusBoxW, geniusBoxH, 6);

        fill(244, 67, 54);
        noStroke();
        textAlign(CENTER, CENTER);
        textSize(w * 0.018);
        textStyle(BOLD);
        text('ðŸ“• Region 3', pos80, geniusBoxY - geniusBoxH * 0.35);
        textStyle(NORMAL);
        textSize(w * 0.015);
        text('Genius nodig', pos80, geniusBoxY - geniusBoxH * 0.15);
        text('(Hoge onzekerheid)', pos80, geniusBoxY);
        textSize(w * 0.015);
        text('"Anticiperen op', pos80, geniusBoxY + geniusBoxH * 0.18);
        text('behoeften vooraf"', pos80, geniusBoxY + geniusBoxH * 0.35);
        pop();
      }

      // === BOTTOM MESSAGE BOX ===
      if (animationProgress > 0.85) {
        const msgBoxW = Math.min(w * 0.65, 760);
        const msgBoxH = h * LAYOUT.bottomBoxHeight;
        const msgBoxY = h * LAYOUT.bottomBoxY;

        push();
        fill(76, 175, 80, 20);
        stroke(76, 175, 80);
        strokeWeight(2.5);
        rectMode(CENTER);
        rect(w/2, msgBoxY, msgBoxW, msgBoxH, 6);

        fill(8, 61, 119);
        noStroke();
        textAlign(CENTER, CENTER);

        // Better line spacing for bottom box
        const lineSpacingBottom = w * 0.018; // ~25px spacing
        let yPosBottom = msgBoxY - msgBoxH * 0.30;

        textSize(w * 0.018);
        textStyle(BOLD);
        text('Koppeling naar jouw bijbaan:', w/2, yPosBottom);

        yPosBottom += lineSpacingBottom;
        textStyle(NORMAL);
        textSize(w * 0.016);
        text('In je bijbaan werk je nu 0.4-0.6 (Region 2, ðŸ“˜ routine).', w/2, yPosBottom);

        yPosBottom += lineSpacingBottom;
        text('Over 4 jaar moet je 0.1-0.3 en 0.7-0.9 kunnen (Region 1/3, ðŸ“• genius).', w/2, yPosBottom);

        yPosBottom += lineSpacingBottom;
        textStyle(BOLD);
        fill(76, 175, 80);
        textSize(w * 0.020);
        text('DÃ¡t is de HBO-transformatie!', w/2, yPosBottom);
        pop();
      }
    }

    function mousePressed() {
      animationProgress = 0;
    }

    function windowResized() {
      resizeCanvas(windowWidth, windowHeight);
      LAYOUT.width = width;
      LAYOUT.height = height;
    }
  </script>
</body>
</html>
